<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîç Digital Ocean Diagnostic Page</title>
    <style>
        body { 
            font-family: monospace; 
            background: #000; 
            color: #0ff; 
            padding: 20px; 
            line-height: 1.6;
        }
        .diagnostic { 
            border: 2px solid #0ff; 
            padding: 15px; 
            margin: 10px 0; 
            background: #001122;
        }
        .result { color: #ff0; }
        .error { color: #f00; }
        .success { color: #0f0; }
    </style>
</head>
<body>
    <h1>üîç DIGITAL OCEAN DEPLOYMENT DIAGNOSTIC</h1>
    
    <div class="diagnostic">
        <h3>üìä TEMPLATE VERIFICATION</h3>
        <div id="template-check" class="result">Checking template source...</div>
    </div>
    
    <div class="diagnostic">
        <h3>üîß JAVASCRIPT FUNCTION CHECK</h3>
        <div id="js-check" class="result">Checking switchToSection function...</div>
    </div>
    
    <div class="diagnostic">
        <h3>üéØ NAVIGATION ELEMENTS</h3>
        <div id="nav-check" class="result">Scanning navigation elements...</div>
    </div>
    
    <div class="diagnostic">
        <h3>‚è∞ DEPLOYMENT INFO</h3>
        <div id="deploy-info" class="result">
            Diagnostic generated: <span id="timestamp"></span><br>
            User agent: <span id="user-agent"></span><br>
            URL: <span id="current-url"></span>
        </div>
    </div>
    
    <div class="diagnostic">
        <h3>üß™ NAVIGATION TEST</h3>
        <button onclick="testNavigation()" style="background: #0ff; color: #000; padding: 10px; border: none; cursor: pointer;">
            üß™ TEST NAVIGATION BUTTON
        </button>
        <div id="test-result" class="result"></div>
    </div>

    <script>
        console.log('üîç DIAGNOSTIC: Starting Digital Ocean environment analysis...');
        
        // Set timestamp
        document.getElementById('timestamp').textContent = new Date().toISOString();
        document.getElementById('user-agent').textContent = navigator.userAgent;
        document.getElementById('current-url').textContent = window.location.href;
        
        // Template verification
        function checkTemplate() {
            const templateCheck = document.getElementById('template-check');
            
            // Check if we're in the diagnostic page or main dashboard
            if (document.title.includes('Diagnostic')) {
                templateCheck.innerHTML = '<span class="result">‚úÖ Diagnostic template loaded successfully</span>';
                return;
            }
            
            // Look for AdminLTE indicators
            const adminlteLinks = document.querySelectorAll('link[href*="adminlte"]');
            const navSidebar = document.querySelector('.nav-sidebar');
            const contentSections = document.querySelectorAll('.content-section');
            
            let result = '';
            result += `AdminLTE CSS links: ${adminlteLinks.length}<br>`;
            result += `Nav sidebar found: ${navSidebar ? '‚úÖ YES' : '‚ùå NO'}<br>`;
            result += `Content sections: ${contentSections.length}<br>`;
            
            if (adminlteLinks.length > 0 && navSidebar) {
                result += '<span class="success">‚úÖ AdminLTE template detected</span>';
            } else {
                result += '<span class="error">‚ùå AdminLTE template NOT detected</span>';
            }
            
            templateCheck.innerHTML = result;
        }
        
        // JavaScript function check
        function checkJavaScript() {
            const jsCheck = document.getElementById('js-check');
            
            let result = '';
            result += `switchToSection exists: ${typeof window.switchToSection === 'function' ? '‚úÖ YES' : '‚ùå NO'}<br>`;
            result += `jQuery loaded: ${typeof $ !== 'undefined' ? '‚úÖ YES' : '‚ùå NO'}<br>`;
            
            // Check for navigation elements
            const navLinks = document.querySelectorAll('.nav-sidebar .nav-link[data-section]');
            result += `Navigation links: ${navLinks.length}<br>`;
            
            // Check onclick handlers
            let onclickCount = 0;
            navLinks.forEach(link => {
                if (link.onclick || link.getAttribute('onclick')) {
                    onclickCount++;
                }
            });
            result += `Links with onclick: ${onclickCount}<br>`;
            
            // Check href attributes
            let hrefCount = 0;
            navLinks.forEach(link => {
                if (link.hasAttribute('href')) {
                    hrefCount++;
                }
            });
            result += `Links with href: ${hrefCount}<br>`;
            
            if (typeof window.switchToSection === 'function') {
                result += '<span class="success">‚úÖ Navigation function available</span>';
            } else {
                result += '<span class="error">‚ùå Navigation function MISSING</span>';
            }
            
            jsCheck.innerHTML = result;
        }
        
        // Navigation elements check
        function checkNavigation() {
            const navCheck = document.getElementById('nav-check');
            
            const navLinks = document.querySelectorAll('.nav-sidebar .nav-link[data-section]');
            let result = `Found ${navLinks.length} navigation links:<br>`;
            
            navLinks.forEach((link, index) => {
                const section = link.getAttribute('data-section');
                const hasHref = link.hasAttribute('href');
                const hasOnclick = link.onclick || link.getAttribute('onclick');
                
                result += `${index + 1}. Section: ${section} | href: ${hasHref ? '‚ùå' : '‚úÖ'} | onclick: ${hasOnclick ? '‚úÖ' : '‚ùå'}<br>`;
            });
            
            navCheck.innerHTML = result;
        }
        
        // Test navigation
        function testNavigation() {
            const testResult = document.getElementById('test-result');
            testResult.innerHTML = 'üß™ Testing navigation...';
            
            if (typeof window.switchToSection === 'function') {
                try {
                    console.log('üß™ DIAGNOSTIC: Testing switchToSection function...');
                    const result = window.switchToSection('overview');
                    testResult.innerHTML = `<span class="success">‚úÖ Function executed, returned: ${result}</span>`;
                } catch (error) {
                    testResult.innerHTML = `<span class="error">‚ùå Function error: ${error.message}</span>`;
                }
            } else {
                testResult.innerHTML = '<span class="error">‚ùå switchToSection function not available</span>';
            }
        }
        
        // Run all checks
        setTimeout(function() {
            checkTemplate();
            checkJavaScript();
            checkNavigation();
        }, 500);
        
        console.log('üîç DIAGNOSTIC: Analysis complete');
    </script>
</body>
</html>